<div class="container">
  <h1>Introduzca monedas</h1>
  <div class="coins-panel">
    @for (coin of coins(); track coin) {
    <p-button (click)="addCoin(coin)" [rounded]="true" severity="info">
      {{ coin | currency : 'EUR' }}
    </p-button>
    }
  </div>

  <div class="balance-section">
    <h2>Saldo: {{ balance() | currency : 'EUR' }}</h2>
    <p-button (click)="returnMoney()" label="Devolver" severity="success" />
  </div>

  <p-table [value]="products()" [tableStyle]="{ 'min-width': '5rem' }">
    <ng-template pTemplate="header">
      <tr>
        <th>Producto</th>
        <th>Precio</th>
        <th>Stock</th>
        <th>Acci√≥n</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-product>
      <tr>
        <td>{{ product.name }}</td>

        <td>{{ product.price | currency : 'EUR' }}</td>

        <td>{{ product.stock }}</td>

        <td>
          <p-button
            label="Seleccionar"
            icon="pi pi-shopping-cart"
            severity="success"
            [disabled]="product.stock === 0"
            (click)="selectProduct(product)"
          >
          </p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <div class="result-section">
    <h2>Cambio: {{ change() | currency : 'EUR' }}</h2>

    @if (change() > 0) {
    <p-button (click)="returnMoney()" label="Recojer" severity="success" />
    }
  </div>

  @if (productsUsuari().length > 0) {
  <p-table [value]="productsUsuari()">
    <ng-template #header>
      <tr>
        <th>Producto</th>
        <th>Cantidad</th>
      </tr>
    </ng-template>
    <ng-template #body let-product>
      <tr>
        <td>{{ product.name }}</td>
        <td>{{ product.amount }}</td>
      </tr>
    </ng-template>
  </p-table>
  <p-button (click)="collectProduct()" label="Recojer" severity="success" />
  }
</div>
